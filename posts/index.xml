<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
  <channel>
    <title>æ‰€æœ‰æ–‡ç«  - Cyan&#39;s Notebook</title>
    <link>/posts/</link>
    <description>æ‰€æœ‰æ–‡ç«  | Cyan&#39;s Notebook</description>
    <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Sun, 06 Aug 2023 10:03:35 &#43;0000</lastBuildDate><atom:link href="/posts/" rel="self" type="application/rss+xml" /><item>
  <title>QEMU CPU Model</title>
  <link>/posts/2023-08-06-qemu-cpu-model/</link>
  <pubDate>Sun, 06 Aug 2023 10:03:35 &#43;0000</pubDate>
  <author>Cyan</author>
  <guid>/posts/2023-08-06-qemu-cpu-model/</guid>
  <description><![CDATA[å›¾ç‰‡ä½¿ç”¨äº†catbox#moeå›¾åºŠï¼Œç‰¹æ®Šç½‘ç»œä¸‹å¯èƒ½æ— æ³•åŠ è½½ï¼›
æ›´åƒæ˜¯åœ¨è®¨è®ºCPU ;-)ï¼Œä¸æƒ³å¬çŽ‹å…«å¿µç»ï¼Ÿç›´æŽ¥é­”æ”¹è¿™æ¡å°±å¯ä»¥äº†ï¼š
1 qemu-system-x86_64 -M q35 -accel kvm -cpu host -m 4096 -smp 4 -drive file=drive å‘æŒ¥CPUå…¨éƒ¨æ€§èƒ½ï¼šCPUæ¨¡åž‹ä¸ŽæŒ‡ä»¤é›† 1 -cpu model ä½¿ç”¨qemu-system-x86_64 -cpu help
æˆ‘ä»¬æš‚æ—¶åªè¦äº†è§£ï¼ŒQEMUæä¾›è¿™ä¹ˆå¤šCPUæ¨¡åž‹ï¼Œæ˜¯ä¸ºäº†ä¾¿äºŽæˆ‘ä»¬è¿ç§»é•œåƒåˆ°å…¶ä»–ç‰©ç†æœºï¼Œç‰¹åˆ«æ˜¯ä¸åŒCPUçš„ç‰©ç†æœºã€‚
æµ‹è¯• ç¡¬ä»¶ï¼šIntel 12100ï¼ˆ4æ ¸8çº¿ç¨‹ï¼Œæ— Eæ ¸ï¼‰ï¼Œ DDR4 32G 3200Mhz RAM
è½¯ä»¶ï¼šGeekBench 6.1.0
å®¿ä¸»æœºï¼šPVEè¿è¡Œçš„QEMU Ubuntu 22.04ï¼Œåˆ†é…8æ ¸å¿ƒã€10G RAM
å®¢æˆ·æœºï¼šï¼ˆåµŒå¥—è™šæ‹ŸåŒ–ï¼‰ Ubuntu 22.04ï¼Œ4G RAMï¼ŒKVMï¼ŒHOST
å®¿ä¸»æœºæµ‹è¯•æ€§èƒ½ï¼šå•æ ¸2265ã€å¤šæ ¸7711ï¼ŒQEMU Standard PC (i440FX + PIIX, 1996) - Geekbench
æµ‹è¯•CPUæ¨¡åž‹å¯¹CPUæ€§èƒ½çš„å½±å“ï¼š cpu model single core multi core url host 2224 7187 https://browser.geekbench.com/v6/cpu/2157089 max 2221 7366 https://browser.geekbench.com/v6/cpu/2157146 kvm64 1149 3994 https://browser.]]></description>
</item>
<item>
  <title>QEMU - accel</title>
  <link>/posts/2023-08-05-qemu-accel/</link>
  <pubDate>Sat, 05 Aug 2023 13:44:16 &#43;0000</pubDate>
  <author>Cyan</author>
  <guid>/posts/2023-08-05-qemu-accel/</guid>
  <description><![CDATA[Intro æŸ¥çœ‹QEMUæ–‡æ¡£ï¼Œå¯¹Acceleratorï¼ˆåŠ é€Ÿå™¨ï¼‰çš„ä»‹ç»å¦‚ä¸‹ï¼š
This is used to enable an accelerator. Depending on the target architecture, kvm, xen, hax, hvf, nvmm, whpx or tcg can be available. By default, tcg is used. If there is more than one accelerator specified, the next one is used if the previous one fails to initialize.
å…³äºŽkvm, xen, hax, hvf, nvmm, whpx, tcgï¼Œä»¥ä¸‹å†…å®¹æ€»ç»“è‡ªChatGPT 3.5ï¼ˆEmmmï¼ŒçœŸå¥½ç”¨ï¼‰ï¼š
æŠ€æœ¯/è½¯ä»¶ æè¿° å¹³å°æ”¯æŒ è™šæ‹ŸåŒ–æ–¹å¼ KVM (Kernel-based Virtual Machine) å¼€æºè™šæ‹ŸåŒ–è§£å†³æ–¹æ¡ˆï¼Œåˆ©ç”¨Linuxå†…æ ¸è™šæ‹ŸåŒ–åŠŸèƒ½ï¼Œåœ¨Linuxä¸Šè¿è¡Œè™šæ‹Ÿæœº Linux ç¡¬ä»¶è™šæ‹ŸåŒ– Xen åŸºäºŽå¾®å†…æ ¸æž¶æž„çš„å¼€æºè™šæ‹ŸåŒ–ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§å®¢æˆ·æœºæ“ä½œç³»ç»Ÿ å¤šå¹³å°ï¼ˆç‰¹åˆ«åœ¨x86ä¸Šå¸¸ç”¨ï¼‰ ç¡¬ä»¶è™šæ‹ŸåŒ–æˆ–ç›´æŽ¥è¿è¡Œ HAX (Hardware Accelerated Execution) Intelæä¾›çš„ç¡¬ä»¶åŠ é€Ÿæ‰§è¡ŒæŠ€æœ¯ï¼Œç”¨äºŽAndroidæ¨¡æ‹Ÿå™¨ä¸­çš„è™šæ‹Ÿæœº x86ä¸»æœºä¸Šè¿è¡ŒARMè™šæ‹Ÿæœº ç¡¬ä»¶åŠ é€Ÿè™šæ‹ŸåŒ– HVF (Hypervisor.]]></description>
</item>
<item>
  <title>QEMU - smp (sockets, die, core, threads)</title>
  <link>/posts/2023-08-05-qemu-smp-sockets-die-core-threads/</link>
  <pubDate>Sat, 05 Aug 2023 04:50:30 &#43;0000</pubDate>
  <author>Cyan</author>
  <guid>/posts/2023-08-05-qemu-smp-sockets-die-core-threads/</guid>
  <description><![CDATA[å›¾ç‰‡ä½¿ç”¨äº†catbox#moeå›¾åºŠï¼Œç‰¹æ®Šç½‘ç»œä¸‹å¯èƒ½æ— æ³•åŠ è½½ï¼›
æ›´åƒæ˜¯åœ¨è®¨è®ºCPU ;-)ï¼Œä¸æƒ³å¬çŽ‹å…«å¿µç»ï¼Ÿç›´æŽ¥é­”æ”¹è¿™æ¡å°±å¯ä»¥äº†ï¼š
1 qemu-system-x86_64 -M q35 -accel kvm -cpu host -m 4096 -smp 4 -drive file=drive å‰ç½®çŸ¥è¯†ï¼šè¶…çº¿ç¨‹â€”â€”ä»»åŠ¡ç®¡ç†å™¨é‡Œå±•ç¤ºçš„å¹¶ä¸æ˜¯çœŸæ­£çš„CPU æµ‹è¯•ä½¿ç”¨çš„CPUä¸ºè‹±ç‰¹å°”Â® é…·ç¿â„¢ i3-12100 å¤„ç†å™¨ (intel.cn)ï¼Œæ ¹æ®è§„æ ¼è¡¨ï¼Œä¸€å…±æœ‰4é¢—æ ¸å¿ƒã€‚è€Œåœ¨htopä¸­ï¼Œå¯ä»¥çœ‹åˆ°8ä¸ªCPUè´Ÿè½½
æ˜¯å› ä¸ºæ“ä½œç³»ç»Ÿä»¥CPUæ”¯æŒçš„çº¿ç¨‹æ•°ï¼Œä½œä¸ºé€»è¾‘æ ¸å¿ƒå±•ç¤ºï¼Œè€Œä¸æ˜¯ç‰©ç†æ ¸å¿ƒï¼›
å½“CPUå¯ç”¨è¶…çº¿ç¨‹åŽï¼ŒCPU ä¼šåœ¨æ¯ä¸ªç‰©ç†å†…æ ¸ä¸Šå…¬å¼€ä¸¤ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œä¸€ä¸ªç‰©ç†å†…æ ¸çŽ°åœ¨å°±åƒä¸¤ä¸ªâ€œé€»è¾‘å†…æ ¸â€ä¸€æ ·ï¼Œå¯ä»¥å¤„ç†ä¸åŒçš„è½¯ä»¶çº¿ç¨‹ï¼›
By taking advantage of idle time when the core would formerly be waiting for other tasks to complete, IntelÂ® Hyper-Threading Technology improves CPU throughput.ï¼ˆåç¨‹å’Œè¿™ä¸ªç†å¿µåŸºæœ¬ç›¸åŒï¼‰
What Is Hyper-Threading? - Intel
å½“ç„¶ï¼Œè¶…çº¿ç¨‹æŠ€æœ¯å¹¶ä¸èƒ½è®©å¤šæ ¸æ€§èƒ½ç®€å•çš„x2ï¼Œç†æƒ³æƒ…å†µä¸‹å¯ä»¥å¸¦æ¥20%è‡³30%å·¦å³çš„æ€§èƒ½ï¼ˆåžåé‡ï¼‰æå‡ã€‚
ä¸ºè™šæ‹Ÿæœºåˆ†é…æ ¸å¿ƒ QMEUä½¿ç”¨-smpåˆ†é…æ ¸å¿ƒï¼Œä½¿ç”¨æ–¹å¼ï¼š
1 -smp [[cpus=]n][,maxcpus=maxcpus][,sockets=sockets][,dies=dies][,clusters=clusters][,cores=cores][,threads=threads] å¯ä»¥ç®€å•ç†è§£ä¸ºä¸€é¢—å¶å­èŠ‚ç‚¹ä¸ºçº¿ç¨‹ï¼ˆé€»è¾‘æ ¸å¿ƒï¼‰çš„æ»¡äºŒå‰æ ‘ï¼š
é€»è¾‘å¤„ç†å™¨æ•°é‡ï¼š
$$ n=sockets*dies*clusters*cores*threads $$
å…¶ä¸­ï¼Œmaxcpusæ˜¯QEMUä¸ºçƒ­æ’æ‹”è®¾ç½®çš„å±žæ€§ï¼Œåœ¨æ­¤ä¸å±•å¼€ï¼›
å‚æ•° å¯¹åº”çš„ç‰©ç†å¯¹è±¡ å‚æ•°ä½œç”¨ sockets CPUæ’æ§½ CPUæ’æ§½æ•°ç›® dies CPUæ™¶ç‰‡ æ¯ä¸ªCPUæœ‰å‡ å—æ‰¿è½½æ ¸å¿ƒçš„æ™¶ç‰‡ clusters é•œç‰‡ä¸Šçš„ æ¯ä¸ªæ™¶ç‰‡å°†CPUåˆ†ä¸ºå‡ ç°‡ cores CPUæ ¸å¿ƒ æ¯ç°‡åŒ…å«å‡ ä¸ªCPU threads / æ¯ä¸ªCPUæ ¸å¿ƒé€šè¿‡è¶…çº¿ç¨‹æ”¯æŒçš„çº¿ç¨‹æ•° å¸¸è§å†™æ³•ï¼š]]></description>
</item>
<item>
  <title>LVM, Linear, RAID[01]...</title>
  <link>/posts/2023-07-30-lvm-linear-raid01/</link>
  <pubDate>Sun, 30 Jul 2023 13:38:36 &#43;0000</pubDate>
  <author>Cyan</author>
  <guid>/posts/2023-07-30-lvm-linear-raid01/</guid>
  <description><![CDATA[æœ‰æ—¶é—´å†å†™ðŸŒ‘
REF ç³»ç»Ÿè¿ç»´|Linux LVMç®€æ˜Žæ•™ç¨‹
(1æ¡æ¶ˆæ¯) Linux | LVM | å¯¹æ¯”ä¸‰ç§é€»è¾‘å·ï¼ˆLogic Volumeï¼‰_Hello Hunkçš„åšå®¢-CSDNåšå®¢]]></description>
</item>
<item>
  <title>PVE Souce</title>
  <link>/posts/2023-07-30-pve/</link>
  <pubDate>Sun, 30 Jul 2023 13:38:05 &#43;0000</pubDate>
  <author>Cyan</author>
  <guid>/posts/2023-07-30-pve/</guid>
  <description><![CDATA[PVE &amp; Debian pve 7.3.3åŸºäºŽdebian 11 bullseye
APTæº 1 sudo apt install apt-transport-https ca-certificates ä¿®æ”¹souces.list
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free # deb https://mirrors.]]></description>
</item>
<item>
  <title>QEMU - QuickStart</title>
  <link>/posts/2023-07-30-qemu-quickstart/</link>
  <pubDate>Sun, 30 Jul 2023 12:57:10 &#43;0000</pubDate>
  <author>Cyan</author>
  <guid>/posts/2023-07-30-qemu-quickstart/</guid>
  <description><![CDATA[æ–‡ç« äºŽ2023å¹´8æœˆ5æ—¥è¿›è¡Œå‹˜è¯¯ï¼Œä¿®æ­£å†…å®¹ï¼š
-smp sockets=1,cores=4,threads=4 =&gt; -smp 4,sockets=1,cores=4,threads=1 åŽŸå› ï¼šthreadså‚æ•°è¡¨ç¤ºæ¯æ ¸å¿ƒå¤šå°‘çº¿ç¨‹
åˆ é™¤-net user
Intro QEMUæ˜¯ä¸€æ¬¾è·¨å¹³å°çš„å¼€æºè™šæ‹Ÿæœºå·¥å…·ï¼Œå› ä¸ºæ— GUIé…ç½®å·¥å…·ï¼Œæœ‰ä¸€å®šä½¿ç”¨é—¨æ§›
æ ¹æ®å†¯è¯ºä¾æ›¼ç»“æž„ï¼Œä¸€ä¸ªè®¡ç®—æœºå¯åˆ†ä¸ºï¼š
è¿ç®—å™¨ æŽ§åˆ¶å™¨ å­˜å‚¨å™¨ è¾“å…¥è®¾å¤‡ è¾“å‡ºè®¾å¤‡ ä½¿ç”¨QEMUæ—¶ï¼Œåº”è¯¥å°½é‡å¾€è¯¥æ¨¡åž‹è”æƒ³
åˆ›å»ºå­˜å‚¨å™¨ åˆ›å»ºä¸€ä¸ª16Gçš„è™šæ‹Ÿç£ç›˜æ–‡ä»¶
1 qemu-img create -f qcow2 drive 16G è™šæ‹Ÿç¡¬ä»¶çŽ¯å¢ƒ è¿ç®—å™¨ã€æŽ§åˆ¶å™¨ -&gt; CPUã€å„ç§åŠ é€Ÿå™¨* è¾“å…¥ã€è¾“å‡ºè®¾å¤‡ -&gt; ç½‘å¡ã€CXLè®¾å¤‡ç­‰ QEMUæœ¬èº«æ²¡æœ‰åƒVMwareé‚£æ ·çš„GUIé…ç½®ç•Œé¢ï¼Œæ‰€æœ‰é…ç½®é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æŒ‡å®š
1 2 3 qemu-system-x86_64 -machine q35 \ -smp 4,sockets=1,cores=4,threads=1 \ -m 4096 çŽ°åœ¨å¯åŠ¨äº†ä¸€ä¸ªæœºåž‹ä¸ºq35ï¼Œå¤„ç†å™¨1æ’æ§½4æ ¸4çº¿ç¨‹ï¼Œå†…å­˜4096MBï¼Œä½¿ç”¨é»˜è®¤ç½‘ç»œé…ç½®çš„è™šæ‹Ÿæœºï¼Œç”±äºŽæ²¡æœ‰å¯åŠ¨ç›˜ï¼Œå¹¶ä¸ä¼šå¯åŠ¨æŸä¸ªç³»ç»Ÿ
åˆ©ç”¨è™šæ‹Ÿç¡¬ä»¶çŽ¯å¢ƒå¯åŠ¨ç³»ç»Ÿ æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€å—ç¡¬ç›˜driveä½œä¸ºå¯åŠ¨ç›˜ï¼ŒæŒ‡å®šç»™è™šæ‹ŸçŽ¯å¢ƒï¼š
1 2 3 4 qemu-system-x86_64 -machine q35 \ -smp 4,sockets=1,cores=4,threads=1 \ -m 4096 \ -drive file=drive ä¼šå‘çŽ°ï¼ŒæŒ‡å®šåŽå¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæ˜¯å› ä¸ºè¿™ä¸ªâ€œç¡¬ç›˜â€æˆ‘ä»¬æ²¡æœ‰ç»™å®ƒâ€œå®‰è£…â€ç³»ç»Ÿ
å®‰è£…ç³»ç»Ÿ å‚è€ƒä¸ºç‰©ç†æœºå®‰è£…ç³»ç»Ÿï¼š]]></description>
</item>
<item>
  <title>QEMU - CXL</title>
  <link>/posts/2023-07-25-qemu-cxl/</link>
  <pubDate>Tue, 25 Jul 2023 00:00:57 &#43;0000</pubDate>
  <author>Cyan</author>
  <guid>/posts/2023-07-25-qemu-cxl/</guid>
  <description><![CDATA[Intro æ–‡ç« ä¸å¯¹CXLã€Linuxå†…æ ¸è¿›è¡Œæ·±ç©¶ï¼Œå¯è§†ä¸ºhello worldç ”ç©¶
å¯¹äºŽQEMUåŸºæœ¬çš„ä½¿ç”¨çŸ¥è¯†ï¼ŒèŠ‚çœç¯‡å¹…ä¸å†èµ˜è¿°ï¼Œå¹¶çœç•¥ç¹çç»†èŠ‚
è½¯ä»¶çŽ¯å¢ƒ å®¿ä¸»æœº&amp;å®¢æˆ·æœº ubuntu-22.04.2-live-server-amd64
QEMU 8.0.3 https://download.qemu.org/qemu-8.0.3.tar.xz
Download QEMU - QEMU
æŒ‰ç…§å®˜æ–¹æµç¨‹è¿›è¡Œç¼–è¯‘
å¯åŠ¨è™šæ‹Ÿæœº 1 2 3 4 5 6 7 qemu-system-x86_64 -M q35,cxl=on -accel kvm -cpu host -m 4096 -smp 4 -drive file=drive \ -object memory-backend-file,id=cxl-mem1,share=on,mem-path=/tmp/cxltest.raw,size=256M \ -object memory-backend-file,id=cxl-lsa1,share=on,mem-path=/tmp/lsa.raw,size=256M \ -device pxb-cxl,bus_nr=12,bus=pcie.0,id=cxl.1 \ -device cxl-rp,port=0,bus=cxl.1,id=root_port13,chassis=0,slot=2 \ -device cxl-type3,bus=root_port13,memdev=cxl-mem1,lsa=cxl-lsa1,id=cxl-pmem0 \ -M cxl-fmw.0.targets.0=cxl.1,cxl-fmw.0.size=4G å¯åŠ¨åŽåº”è¯¥å¯ä»¥åœ¨/devç›®å½•ä¸‹æ‰¾åˆ°CXLæ–‡ä»¶
REF åœ¨ubuntuä¸Šæ‰§è¡ŒQEMUçš„ç¼–è¯‘å®‰è£…_ubuntuå®‰è£…qemu_ç”°å›­è¯—äººä¹‹å›­çš„åšå®¢-CSDNåšå®¢
linuxæŠ¥é”™ï¼š/bin/sh: 1: flex: not found scripts/Makefile.host:9: recipe for target â€˜scripts/kconfig/lexe_é”…é”…æ˜¯é”…é”…çš„åšå®¢-CSDNåšå®¢
How To Emulate CXL Devices using KVM and QEMU - Steve Scargall]]></description>
</item>
<item>
  <title>VNC for PVE VM (not noVNC)</title>
  <link>/posts/2023-07-25-vnc-for-pve-vm-not-novnc/</link>
  <pubDate>Mon, 24 Jul 2023 23:56:10 &#43;0000</pubDate>
  <author>Cyan</author>
  <guid>/posts/2023-07-25-vnc-for-pve-vm-not-novnc/</guid>
  <description><![CDATA[VNC Client Access - Proxmox VE]]></description>
</item>
<item>
  <title>Resize Linux LVM</title>
  <link>/posts/resize-linux-lvm/</link>
  <pubDate>Mon, 24 Jul 2023 23:54:30 &#43;0000</pubDate>
  <author>Cyan</author>
  <guid>/posts/resize-linux-lvm/</guid>
  <description><![CDATA[How to resize a logical volume with 5 simple LVM commands | Enable Sysadmin (redhat.com)
ç³»ç»Ÿè¿ç»´|å¦‚ä½•åœ¨ Linux ä¸­æ‰©å±•/å¢žåŠ  LVM å¤§å°ï¼ˆé€»è¾‘å·è°ƒæ•´ï¼‰
è§£å†³ Linux /dev/mapper/ubuntu&ndash;vg-ubuntu&ndash;lv ç£ç›˜ç©ºé—´ä¸è¶³çš„é—®é¢˜_ubuntu vg ä¸ºä»€ä¹ˆä¸ç”¨æ»¡_fly-liuhaoçš„åšå®¢-CSDNåšå®¢]]></description>
</item>
<item>
  <title>CUDA, CUDNN &amp; Installation</title>
  <link>/posts/2023-06-24-cuda/</link>
  <pubDate>Sat, 24 Jun 2023 08:06:21 &#43;0000</pubDate>
  <author>Cyan</author>
  <guid>/posts/2023-06-24-cuda/</guid>
  <description><![CDATA[Create Python Environment 1 cond create -n env_name python=3.x Torch Start Locally | PyTorch
Check Installation 1 2 import torch torch.cuda.is_available() CUDA CUDA Toolkit Archive | NVIDIA Developer
1 conda install cudatoolkit=x.x CUDNN ç®€å•åŒºåˆ†ï¼šCUDAä¸ºNVçš„è®¡ç®—æ¡†æž¶ï¼Œè€ŒCUDNNä¸ºNVä¸ºæ·±åº¦å­¦ä¹ è®¾è®¡çš„è®¡ç®—åº“
å»ºè®®ä½¿ç”¨pytorchå®˜æ–¹çš„condaæŒ‡ä»¤ä¸€é”®å®‰è£…]]></description>
</item>
</channel>
</rss>
